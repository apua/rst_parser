<!DOCTYPE html>
<html>
  <head>
  <meta charset=utf-8>
  <link rel=icon href="https://developer.cdn.mozilla.net/static/img/favicon144.e7e21ca263ca.png">
  <link rel=stylesheet href="my-css-file.css">
  <title>My test page</title>
  <script type="module">
    import {Node, Parser} from './src/es6/parser.js';
    console.log(Parser);
  </script>
  </head>
  <body>
    <p>This is my page</p>
    <article>here??</article>
  </body>
</html>


<!--
    All right, let's try to fetch README.rst and my JS code to
    parse, *render* HTML, and embed it!!

<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"></head>
<body>
<div id=toc></div>
<pre id=content></pre>
<script>
const toc = document.querySelector('#toc')
const content = document.querySelector('#content')

function draw_tree(tree) {
    let ul = document.createElement('ul')
    tree.forEach(function(elmt) {
        let li = document.createElement('li')
        li.innerHTML = `<a href="#">${elmt.path.replace(/^public\//, '')}</a>`
        li.addEventListener('click', function(e) {
            console.info(e)
            fetch(elmt.url)
                .then(res => res.json())
                .then(json => (content.innerText = decodeURIComponent(escape(atob(json.content)))))
        })
        ul.appendChild(li)
    })
    toc.appendChild(ul)
}

// The Github API return recursive sorted document tree by path
fetch('https://api.github.com/repos/apua/blog/git/trees/master?recursive=1')
    .then(res => res.json())
    .then(json => json.tree.filter(elmt => elmt.path.startsWith('public/') && elmt.path.endsWith('.rst')))
    .then(tree => draw_tree(tree))
</script>
<script type="module" src="testmodule.js"></script>
</body>
</html>

-->
